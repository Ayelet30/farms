@use '../../styles/tokens/bereshit_farm-tokens' as *;

:host{
  --menu-open: 280px;
  --menu-closed: 64px;
  --header-h: 80px;

  display: block;
}

/* ===== HEADER ===== */
.header{
  position: fixed;
  top: 0;
  inset-inline: 0;
  height: var(--header-h);
  z-index: 5000;
}

/* כפתור המבורגר – רק מובייל */
.hamburger{
  position: absolute;
  inset-inline-end: 10px; /* ימין */
  top: 50%;
  transform: translateY(-50%);
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid #cdd6bf;
  background: #f7f9f4;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  display: none; /* נדלק במובייל */
  z-index: 6000;
}

/* פס “חם” לפתיחה בהובר בדסקטופ */
.edge-hotzone{
  position: fixed;
  top: var(--header-h);
  bottom: 0;
  inset-inline-end: 0;
  width: 12px;
  z-index: 4500;
  background: transparent;
  display: none; /* נדלק בדסקטופ */
}

/* ===== LAYOUT BASE ===== */
.body-layout{
  background: var(--panel-bg);
  padding-top: var(--header-h);
  position: relative;
  min-height: 100dvh;

  /* דסקטופ ברירת מחדל */
  --menu-w: var(--menu-closed);
}

.body-layout.drawer-open{
  --menu-w: var(--menu-open);
}

/* ===== SIDEBAR (ה־Aside של ה־Layout) ===== */
.slider{
  position: fixed;
  top: var(--header-h);
  bottom: 0;
  inset-inline-end: 0;
  inset-inline-start: auto;

  width: var(--menu-w);
  background: var(--panel-bg);
  overflow: hidden;
  box-sizing: border-box;
  z-index: 4600;
}

/* התוכן נדחף שמאלה לפי רוחב התפריט */
.main-content{
  min-height: calc(100dvh - var(--header-h));
  background: #fffef9;

  margin-inline-end: var(--menu-w);
  margin-inline-start: 0;

  position: relative;
  z-index: 1;
}

.content-area{
  height: calc(100dvh - var(--header-h));
  overflow: auto;
  padding: 40px 30px;
  box-sizing: border-box;
}

/* Scrim (בדסקטופ לא) */
.scrim{ display: none; }

/* ===== לוודא שה־app-slider ממלא את ה־Aside ===== */
:host ::ng-deep app-slider{
  display: block;
  height: 100%;
}
:host ::ng-deep app-slider .layout,
:host ::ng-deep app-slider .side-menu{
  width: 100% !important;
  height: 100%;
}
:host ::ng-deep app-slider .side-menu{
  overflow: auto;
}
:host ::ng-deep app-slider .scrim{
  display: none !important;
}

/* =========================================================
   DESKTOP (>=1024):
   - Rail תמיד גלוי (64px)
   - Hover-zone יכול “לפתוח צף” (את זה עושים דרך TS עם class)
   ========================================================= */
@media (min-width: 1024px){
  .edge-hotzone{ display: block; }
}

/* =========================================================
   MOBILE/TABLET (<=1023.98):
   - drawer overlay (לא דוחף)
   - המבורגר מוצג
   ========================================================= */
@media (max-width: 1023.98px){
  .hamburger{ display: inline-grid; place-items: center; }

  .body-layout{
    --menu-w: 0px; /* התוכן תמיד 100% */
  }

  .main-content{
    margin-inline-end: 0 !important;
  }

  .content-area{
    padding: 12px 12px;
  }

  /* Drawer צף */
  .slider{
    width: min(var(--menu-open), 92vw);
    max-width: 92vw;
    height: calc(100dvh - var(--header-h));
    box-shadow: 0 12px 40px rgba(0,0,0,.22);

    /* פתוח ברירת מחדל לפי class drawer-open */
    transform: translateX(105%); /* סגור כברירת מחדל */
    transition: transform .22s ease, box-shadow .22s ease;
  }

  /* פתוח */
  .body-layout.drawer-open .slider{
    transform: translateX(0);
  }

  /* Scrim במובייל */
  .scrim{
    display: block;
    position: fixed;
    inset: var(--header-h) 0 0 0;
    background: rgba(0,0,0,.35);
    z-index: 4550;
  }
}

@media (max-width: 360px){
  .slider{ width: 92vw; max-width: 92vw; }
}

<header class="site-header">
  <!-- צד שמאל: שם חווה + תיאור + עיגול לוגו לחיץ -->
  <div class="left-group">
   <div class="farm-section">
<button
  type="button"
  class="farm-logo"
  (click)="goHome()"
  [title]="farmName || 'עמוד הבית'"
  [style.background]="farmLogoUrl ? 'center / cover no-repeat url(' + farmLogoUrl + ')' : ''"
>
  <span *ngIf="!farmLogoUrl" class="logo-initials">{{ farmInitials }}</span>
</button>


<span *ngIf="farmName" class="farm-name">{{ farmName }}</span>
<span *ngIf="farmNote" class="farm-note">{{ farmNote }}</span>

  <span *ngIf="farmName" class="farm-name">{{ farmName }}</span>
  <span *ngIf="farmNote" class="farm-note">{{ farmNote }}</span>
</div>

   
  </div>

  <!-- צד ימין: אזור הזדהות/מחליף תפקידים -->
 <div class="auth-section" dir="rtl">
    <div class="parent-details">
      <span *ngIf="userName" class="parent-name">
        <span class="parent-name-text">
          {{ userName }}
        </span>

        <!-- חץ דרופדאון – רק אם יש יותר מחברות אחת -->
        <ng-container *ngIf="memberships.length > 1">
          <button
            type="button"
            class="role-toggle-btn"
            (click)="toggleRoleMenu($event)"
            [class.open]="isRoleMenuOpen"
            aria-label="החלפת תפקיד"
          >
            <span class="chevron"></span>
          </button>

          <!-- חלונית בחירה -->
          <ul class="role-menu" *ngIf="isRoleMenuOpen">
            <li
              *ngFor="let m of memberships"
              (click)="onChooseMembership(m)"
              [class.active]="m.tenant_id === selected?.tenant_id"
            >
              <div class="role-line">{{ formatMembershipRole(m) }}</div>
              <div class="farm-line">{{ formatMembershipFarm(m) }}</div>
            </li>
          </ul>
        </ng-container>
      </span>

      <span *ngIf="userRole" class="parent-Role">
        {{ userRole }}
      </span>
    </div>

    <button
      class="auth-button"
      [ngClass]="isLoggedIn ? 'logout' : 'login'"
      (click)="handleLoginLogout()"
    >
      {{ isLoggedIn ? 'התנתק' : 'התחבר' }}
    </button>
  </div>
</header>

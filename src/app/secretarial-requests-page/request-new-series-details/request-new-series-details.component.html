<div class="page" dir="rtl" *ngIf="request as r">
  <header class="top">
    <h1>בקשה לפתיחת סדרה</h1>
  </header>

  <article class="card">

<!-- יום בשבוע -->
<div class="row">
  <div class="label">יום בשבוע</div>
  <div class="val">{{ startWeekdayName }}</div>
</div>

<!-- תאריך התחלה -->
<div class="row">
  <div class="label">תאריך התחלה</div>
  <div class="val">{{ startDate }}</div>
</div>

    <div class="row" *ngIf="!isOpenEnded">
      <div class="label">תאריך סיום</div>
      <div class="val">{{ endDate }}</div>
    </div>
<!-- מדריך -->
<div class="row">
  <div class="label">מדריך</div>
  <div class="val">{{ instructorName() }}</div>
</div>

    <!-- שעת התחלה מה-payload -->
    <div class="row">
      <div class="label">שעת התחלה מבוקשת</div>
      <div class="val">{{ requestedStartTime }}</div>
    </div>

    <div class="row">
      <div class="label">סוג סדרה</div>
      <div class="val">{{ isOpenEnded ? 'ללא הגבלה' : 'מוגבלת' }}</div>
    </div>
<!-- מספר שיעורים (רק אם מוגבלת) -->
<div class="row" *ngIf="!isOpenEnded">
  <div class="label">מספר שיעורים</div>
  <div class="val">{{ repeatWeeks }}</div>
</div>

    <!-- payment_plan -->
    <div class="row">
      <div class="label"> מסלול תשלום</div>
      <div class="val">{{ paymentPlanName() }}</div>
    </div>

    <!-- horizon -->
    <!-- horizon (רק ללא הגבלה) -->
<div class="row" *ngIf="isOpenEnded">
  <div class="label">חלון בדיקה (ימים)</div>
  <div class="val">{{ seriesSearchHorizonDays }}</div>
</div>


    <!-- skipped farm dates -->
    <div class="row">
      <div class="label">דילוגים (ימי חופש חווה)</div>
      <div class="val" *ngIf="skippedFarmDates.length; else noFarmSkips">
        <ul class="list-inline">
          <li *ngFor="let d of skippedFarmDates">{{ d }}</li>
        </ul>
      </div>
      <ng-template #noFarmSkips>—</ng-template>
    </div>

    <!-- skipped instructor dates -->
    <div class="row">
      <div class="label">דילוגים (אי-זמינות מדריך)</div>
      <div class="val" *ngIf="skippedInstructorDates.length; else noInstructorSkips">
        <ul class="list-inline">
          <li *ngFor="let d of skippedInstructorDates">{{ d }}</li>
        </ul>
      </div>
      <ng-template #noInstructorSkips>—</ng-template>
    </div>

    <!-- referral -->
    <div class="row">
      <div class="label">קובץ הפניה</div>
      <div class="val">
        <ng-container *ngIf="referralUrl; else noReferral">
          <a [href]="referralUrl" target="_blank" rel="noopener">פתיחת קובץ הפניה</a>
        </ng-container>
        <ng-template #noReferral>—</ng-template>
      </div>
    </div>

    <textarea
      class="note"
      [(ngModel)]="note"
      placeholder="הערה למזכירה / סיבה לדחייה (חובה בדחייה)">
    </textarea>
    <div class="hint error" *ngIf="!note.trim() && !loading()">
  חובה למלא סיבה לפני דחיית בקשה
</div>


    <div class="actions">
      <button class="btn approve" (click)="approveSelected()" [disabled]="loading()">
        אישור
      </button>

    <button
  class="btn reject"
  (click)="rejectSelected()"
  [disabled]="loading() || !note.trim()">
  דחייה
</button>

    </div>

  </article>
</div>

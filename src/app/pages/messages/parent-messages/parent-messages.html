<div class="message-container">
  <h2> 砖 注 砖专</h2>

  <form (ngSubmit)="submitMessage()" #noteForm="ngForm">
    <label for="subject">砖</label>
    <select id="subject" [(ngModel)]="newNote.subject" name="subject" required>
      <option value="" disabled selected hidden>专 砖</option>
      <option value=""></option>
      <option value=" "> </option>
      <option value="拽砖 转">拽砖 转</option>
    </select>

    <label for="content">转 注</label>
    <textarea
      id="content"
      [(ngModel)]="newNote.content"
      name="content"
      maxlength="500"
      required
    ></textarea>

    <button type="submit">砖 注 砖专</button>
  </form>

  <div *ngIf="confirmationMessage" class="confirmation">
    {{ confirmationMessage }}
  </div>

  <button (click)="toggleHistory()" class="history-btn">
     {{ showHistory ? '住转专 转 注专转 砖砖' : '爪 转 注专转 砖砖 注专' }}
  </button>

  <div *ngIf="showHistory" class="message-history">
    <table>
      <thead>
        <tr>
          <th>转专</th>
          <th>砖</th>
          <th>转</th>
          <th>住住</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let note of noteHistory">
          <td>{{ note.date_sent | date: 'dd.MM.yy' }}</td>
          <td>{{ note.title }}</td>
          <td>{{ note.content.length > 20 ? (note.content | slice:0:20) + '...' : note.content }}</td>
          <td>
            <span [ngClass]="statusClass(note.status)">
              {{ getStatusLabel(note.status) }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

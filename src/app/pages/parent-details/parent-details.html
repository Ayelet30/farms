<div *ngIf="!loading && parent" class="child-card">
  <div class="child-header">
    <p *ngIf="infoMessage" class="inline-message" aria-live="polite">{{ infoMessage }}</p>
    <div *ngIf="!isEditing">
  <h3>{{ parent.first_name }} {{ parent.last_name }}</h3>

    </div>
   <div *ngIf="isEditing" class="editable-name">
  <input [(ngModel)]="editableParent.first_name" class="editable-input" placeholder="×©× ×¤×¨×˜×™" />
  <input [(ngModel)]="editableParent.last_name" class="editable-input" placeholder="×©× ××©×¤×—×”" />
</div>
   <div class="button-group">
  <button *ngIf="!isEditing" (click)="isEditing = true" class="btn-edit">âœï¸ ×¢×¨×•×š</button>
  <ng-container *ngIf="isEditing">
<button (click)="onSaveClick()" class="btn-save">ğŸ’¾ ×©××•×¨</button>
    <button (click)="cancelEdit()" class="btn-cancel">âŒ ×‘×™×˜×•×œ</button>
  </ng-container>
</div>

  </div>

  <p><strong>×ª×¢×•×“×ª ×–×”×•×ª:</strong> {{ parent.id_number }}</p>

  <p>
    <strong>×›×ª×•×‘×ª:</strong>
    <span *ngIf="!isEditing">{{ parent.address || '-' }}</span>
    <input *ngIf="isEditing" [(ngModel)]="editableParent.address" class="editable-input" />
  </p>
<p>
  <strong>×˜×œ×¤×•×Ÿ:</strong>
  <span *ngIf="!isEditing">{{ parent.phone || '-' }}</span>
  <ng-container *ngIf="isEditing">
    <input [(ngModel)]="editableParent.phone" class="editable-input" />
    <div *ngIf="phoneError" class="error-msg">{{ phoneError }}</div>
  </ng-container>
</p>

<p>
  <strong>×™×•× ×—×™×•×‘ ×—×•×“×©×™:</strong>
  {{ parent?.billing_day_of_month }} -       × ×™×ª×Ÿ ×œ×©×™× ×•×™ ×¢×´×™ ××–×›×™×¨×” ×‘×œ×‘×“      
</p>


<p>
  <strong>×“×•×"×œ:</strong>
  <span *ngIf="!isEditing">{{ parent.email || '-' }}</span>
  <ng-container *ngIf="isEditing">
    <input [(ngModel)]="editableParent.email" type="email" class="editable-input" />
    <div *ngIf="emailError" class="error-msg">{{ emailError }}</div>
  </ng-container>
</p>
<!-- ×“×¨×›×™ ×”×ª×§×©×¨×•×ª -->
<div class="contact-methods">
  <strong>×“×¨×›×™ ×”×ª×§×©×¨×•×ª:</strong>

  <!-- ××¦×‘ ×ª×¦×•×’×” -->
 <div *ngIf="!isEditing" class="contact-tags">
  <span *ngIf="parent?.notify?.email" class="contact-tag">×“×•×"×œ</span>
  <span *ngIf="parent?.notify?.sms" class="contact-tag">SMS</span>
  <span *ngIf="parent?.notify?.whatsapp" class="contact-tag">×•×•×˜×¡××¤</span>
  <span *ngIf="!parent?.notify" class="contact-tag contact-tag-empty">××™×Ÿ ×”×¢×“×¤×•×ª</span>
</div>


  <!-- ××¦×‘ ×¢×¨×™×›×” -->
  <div *ngIf="isEditing" class="contact-checkboxes">
    <label>
      <input type="checkbox" [(ngModel)]="editableParent.notify.email" />
      ×“×•×"×œ
    </label>
    <label>
      <input type="checkbox" [(ngModel)]="editableParent.notify.sms" />
      SMS
    </label>
    <label>
      <input type="checkbox" [(ngModel)]="editableParent.notify.whatsapp" />
      ×•×•×˜×¡××¤
    </label>
  </div>
</div>

</div>

<div *ngIf="!loading && visibleChildren.length > 0" class="children-list">
  <h3>ğŸ§’ ×”×™×œ×“×™× ×©×œ×™</h3>
  <ul>
  <li *ngFor="let child of visibleChildren">
  <strong>{{ child.first_name }} {{ child.last_name }}</strong> â€“
      ×’×™×œ: {{ getAge(child.birth_date) }} â€“
      ×¡×˜×˜×•×¡: {{ getStatusText(child.status) }}
    </li>
  </ul>
</div>
<div
  *ngIf="showConfirmDialog"
  class="modal-backdrop"
>
  <div class="modal-panel" role="dialog" aria-modal="true">
    <h4>××™×©×•×¨ ×©××™×¨×ª ×©×™× ×•×™×™×</h4>
    <p>×”×× ××ª ×‘×˜×•×—×” ×©×‘×¨×¦×•× ×š ×œ×©××•×¨ ××ª ×”×©×™× ×•×™×™× ×‘×¤×¨×˜×™ ×”×”×•×¨×”?</p>

    <div class="modal-actions">
      <button class="btn-save" (click)="confirmSave()">ğŸ’¾ ×©××•×¨</button>
      <button class="btn-cancel" (click)="cancelSaveDialog()">âŒ ×‘×™×˜×•×œ</button>
    </div>
  </div>
</div>



<div *ngIf="!loading && children.length === 0">
  <p>×œ× × ××¦××• ×™×œ×“×™× ×œ×”×¦×’×”.</p>
</div>
